{% comment %}
  UnderItAll Custom Rug Pad Calculator
  A theme app block for calculating custom rug pad pricing
{% endcomment %}

{{ 'calculator-block.css' | asset_url | stylesheet_tag }}

<div 
  class="underitall-calculator-block" 
  data-block-id="{{ block.id }}"
  data-api-url="{{ block.settings.api_url }}"
>
  {% if block.settings.show_description %}
    <div class="calculator-header">
      <h2>{{ block.settings.heading }}</h2>
      <p>{{ block.settings.description }}</p>
    </div>
  {% else %}
    <h2>{{ block.settings.heading }}</h2>
  {% endif %}

  <div id="underitall-calculator-root"></div>

  <script>
    // Global config for calculator bundle
    window.UNDERITALL_CALCULATOR_CONFIG = {
      apiUrl: "{{ block.settings.api_url }}",
      brandAssetsUrl: "{{ block.settings.api_url }}/brand",
      blockId: "{{ block.id }}"
    };
  </script>
</div>

<script src="{{ 'calculator-block.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "UnderItAll Calculator",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "api_url",
      "label": "API Base URL",
      "default": "https://its-under-it-all.replit.app",
      "info": "The base URL for the UnderItAll API"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Custom Rug Pad Calculator"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Get instant pricing for custom-cut perforated rug pads"
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show description",
      "default": true
    }
  ]
}
{% endschema %}